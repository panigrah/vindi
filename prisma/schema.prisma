// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("MONGODB_URI")
}

model Wine {
  id  String @id @default(auto()) @map("_id") @db.ObjectId
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  name  String
  variety String
  appelation  String
  description String
  varieties String
  alcohol  Float
  media String[]
  year  Int
  tastings Tasting[]
  addedBy String?
}

model User {
  id String   @id @default(auto()) @map("_id") @db.ObjectId
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
  username     String   @unique
  passwordHash String
  tastings  Tasting[]
}

model Tasting {
  id  String @id @default(auto()) @map("_id") @db.ObjectId
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  published Boolean
  location  String?
  wineId  String
  wine  Wine @relation(fields: [wineId], references: [id], onDelete: Cascade)

  reviewerId  String
  reviewer  User @relation(fields: [reviewerId], references: [id], onDelete: Cascade)

  price  Float?
  currency  String?

  clarity   String
  appearanceIntensity String
  color  String
  appearanceNotes String

  condition String
  noseIntensity String
  aromaDescription String
  development String

  sweetness String
  acidity String
  tannin  String
  alcohol  String
  body  String
  flavorIntensity String
  flavorCharacteristics String
  otherCharacteristics String
  finish String

  quality  String
  readiness String
}